pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
  spr_size=8
  fancyfill_ct=1
  fancyfill={
    0b1010010101011010,
    0b0101010110101010,
    0b0101101010100101,
    0b1010101001010101,
  }
  -- fancyfill={0b0101010010101010, 0b1010101001010101}
  player={
    stats={str=50,agl=50,lck=00},
    stats_order={"str","agl","lck"},
  }

  frame_ct=0
end

--[[
  .-----------------------.
  |32768|16384| 8192| 4096|  xoxo xoxo oxox oxox
  |-----|-----|-----|-----|  xoxo oxox oxox xoxo
  | 2048| 1024| 512 | 256 |  oxox oxox xoxo xoxo 
  |-----|-----|-----|-----|  oxox xoxo xoxo oxox
  | 128 |  64 |  32 |  16 |
  |-----|-----|-----|-----|
  |  8  |  4  |  2  |  1  |
  '-----------------------'
  {0b1010101001010101}
]]

-->8
function _update()
  frame_ct+=1

  -- background
  if frame_ct%2==0 then
    fancyfill_ct+=1
  end
end

-->8
function _draw()
  --bg drawing
  cls(0)
  fillp(fancyfill[(fancyfill_ct%4)+1]) -- custom fillp for bg
  rectfill(0,0,128,128,1)   -- use it
  fillp()                   -- reset after
	 
  -- sections
  draw_sidebar()
  -- draw_encounter()
  
end

function draw_sidebar()
  -- bg render
  map()

  -- char pic
  -- spr(1,1*spr_size,1.5*spr_size)

  -- health ----------------
  fancy_container(1,10,25,26,3,1,7)
  spr(16, 4,  14)
  spr(16, 15, 14)
  spr(17, 4,  24)
  spr(18, 15, 24)
  
  -- stats -----------------
  draw_stats()

  -- items -----------------
  fancy_container(1,92,25,26,3,1,7)
  spr(32, 4, 96)
  spr(32, 15, 96)
  spr(32, 4, 106)
  spr(32, 15, 106)


end

function fancy_container(x,y,w,h,r,f,b)
  --[[
    Draw a fancy UI container to the screen

    Args: 
      x: Starting x position
      y: Starting y position
      w: Width of the container
      h: Height of the container
      r: Border radius
      f: Fill color
      b: Border color
  ]]
  fillp()                      -- solid fill
  rrectfill(x, y, w, h, r, f)  -- fill solid
  fillp(fancyfill[((fancyfill_ct*-1)%4)+1])  -- fancy fill (inv.)
  rrectfill(x, y, w, h, r, f)  -- populate rect w fancy fill
  fillp()                      -- solid fill
  rrect(x, y+1, w, h, r, 1)    -- border drop shadow
  rrect(x, y, w, h, r, b)      -- border
end

function draw_stats()
  local base_height,spacing,line_gap=44,15,7
  for i=1,#player.stats_order do
    local k = player.stats_order[i]
    local v = player.stats[k]
    local val = v < 10 and "0"..v or v
    local base_y = base_height + (spacing * (i-1))
    print(k..":"..val, 2, base_y+1, 1)
    print(k..":"..val, 2, base_y,   7)
    line(2,base_y+line_gap,     24, base_y+line_gap,     7)
    line(2,base_y+line_gap+1,   24, base_y+line_gap+1,   1)
  end
end


__gfx__
00000000499a9aa70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009111111a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700917117190000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700091111119aa999aa7799a4aaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770009171171aa994499a9449999949aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700911771191111111111111111994a90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000041111119dddddddddddddddd1149a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000044494994dddddddddddddddddd19a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000dddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0dd00dd00dd00dd00dd00dd0dddddddddddd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
de7dde7dde7dd55dd51dd15ddddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e887e887e8875115d111111ddddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e888888ee8881115d111111ddddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
de8888edde88115d0d1111d0dddddddddddd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0de88ed00de815d000d11d00dddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00deed0000de5d00000dd000dddddddddddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000dddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00d55d00000000000000000000000000dddd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d5115d0000000000000000000000000dddd40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05111150000000000000000000000000dddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05111150000000000000000000000000dddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d5115d0000000000000000000000000dddd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00d55d00000000000000000000000000dddd90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000dddda0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e000000200000000dddddddddddddddddda4a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0e00002000000000dddddddddddddddddda9a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00e0020000000000dddddddddddddddda7a990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000e200000000000aaa77a7aaa7aa7aaa99400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002e000000000009449999499994999444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00200e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
020000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0302020400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313132400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323400000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3030303030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
